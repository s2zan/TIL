# HTTPμ κµ¬μ΅° λ° ν•µμ‹¬ μ”μ†

## HTTP

> HyperText Transfer Protocol
μ›Ήμƒμ—μ„ μ„λ΅ λ‹¤λ¥Έ μ„λ²„ κ°„μ— ν•μ΄νΌν…μ¤νΈ λ¬Έμ„(HTML)λ¥Ό μ£Όκ³ λ°›μ„ μ μλ„λ΅ λ§λ“¤μ–΄μ§„ ν”„λ΅ν† μ½



### ν†µμ‹  λ°©μ‹

#### HTTP μ”μ²­(request)κ³Ό μ‘λ‹µ(response)
ν΄λΌμ΄μ–ΈνΈκ°€ λ¨Όμ € HTTP μ”μ²­μ„ μ„λ²„μ— λ³΄λ‚΄λ©΄, μ„λ²„λ” μ”μ²­μ„ μ²λ¦¬ν• ν›„ κ²°κ³Όμ— λ”°λ¥Έ HTTP μ‘λ‹µμ„ ν΄λΌμ΄μ–ΈνΈμ—κ² λ³΄λƒ„
```python
@app.route("/ping", methods=['GET'])
def ping():
    return "pong"
```
* HTTP μ”μ²­ : `/ping` μ£Όμ†μ— GET μ”μ²­μ„ λ³΄λƒ„
* HTTP μ‘λ‹µ : `200 OK` μƒνƒ μ½”λ“μ™€ ν•¨κ» "pong"μ΄λΌλ” ν…μ¤νΈ λ³΄λƒ„
μ„μΌ μ½”λ“μ—μ„ λ¬Έμμ—΄λ§ λ¦¬ν„΄λλ” κ²ƒ κ°™μ•„ λ³΄μ΄μ§€λ§, Flaskκ°€ HTTP λ¶€λ¶„μ„ μλ™μΌλ΅ μ²λ¦¬ν•΄ "pong"μ„ bodyλ΅ κ°€μ§€λ” HTTP μ‘λ‹µμΌλ΅ λ³€ν™μ‹μΌμ¤€λ‹¤!
#### stateless
μƒνƒκ°€ μ—†λ‹¤ = κ°κ°μ HTTP ν†µμ‹ μ€ λ…λ¦½μ μ΄λ©° κ·Έ μ „μ— μ²λ¦¬λ HTTP ν†µμ‹ μ— λ€ν•΄ μ „ν€ μ•μ§€ λ»ν•¨
* π‘ μ„λ²„ λ””μμΈμ΄ ν›¨μ”¬ κ°„λ‹¨ν•΄μ§€κ³  ν¨κ³Όμ 
	μ—¬λ¬ λ‹¤λ¥Έ HTTP ν†µμ‹ κ°„μ μ§„ν–‰μ΄λ‚ μ—°κ²° μƒνƒμ μ²λ¦¬/μ €μ¥μ„ κµ¬ν„ λ° κ΄€λ¦¬ν•μ§€ μ•μ•„λ„ λ¨
* π‘ HTTP μ”μ²­μ„ λ³΄λ‚Ό λ•λ” ν•΄λ‹Ή μ”μ²­μ„ μ²λ¦¬ν•κΈ° μ„ν•΄ ν•„μ”ν• λ¨λ“  λ°μ΄ν„°λ¥Ό λ§¤λ² ν¬ν•¨μ‹μΌ μ”μ²­ν•΄μ•Ό ν•¨
	-> μ΄λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄ μΏ ν‚¤(cookie, ν΄λΌμ΄μ–ΈνΈ μΈ΅μ— λ°μ΄ν„° μ €μ¥)λ‚ μ„Έμ…(session, μ„λ²„ μΈ΅μ— λ°μ΄ν„° μ €μ¥)λ“± μ‚¬μ©



### HTTP μ”μ²­ κµ¬μ΅°

##### Start Line
```http
GET /test HTTP/1.1
```
λ‹¤μκ³Ό κ°™μ΄ κµ¬μ„±

- HTTP λ©”μ†λ“
  - ν•΄λ‹Ή μ”μ²­μ΄ μλ„ν•λ” μ•΅μ…μ„ μ •μ
  - **GET** / **POST** / PUT / DELETE / OPTIONS λ“±
- Request target
  - ν•΄λ‹Ή μ”μ²­μ΄ μ „μ†΅λλ” λ©ν‘ μ£Όμ†. μ„μ κ²½μ° `test` μ—”λ“ν¬μΈνΈμ— λ³΄λƒ„μ„ μλ―Έ
- HTTP version
  - ν•΄λ‹Ή μ”μ²­μ HTTP λ²„μ „
  - 1.0 / 1.1 / 2.0

##### Headers

```
Accept: application/json
Accept-Encoding: gzip, deflate
Connection: keep-alive
Content-Length: 83
Content-Type: application/json
Date: Thu, 18 Jul 2019 20:53:12 GMT
Host: XXXXXXXXX.com
User-Agent: HTTPie/0.9.3
```
HTTP μ”μ²­ κ·Έ μμ²΄μ— λ€ν• μ •λ³΄κ°€ key - value λ΅ κµ¬μ„±
μμ£Ό μ‚¬μ©λλ” ν—¤λ” μ •λ³΄λ” λ‹¤μκ³Ό κ°™λ‹¤.

- **Host** : μ”μ²­μ΄ μ „μ†΅λλ” target νΈμ¤νΈμ URL μ£Όμ†
- **User-Agent** : μ”μ²­μ„ λ³΄λ‚΄λ” ν΄λΌμ΄μ–ΈνΈμ— λ€ν• μ •λ³΄ (μ›Ή λΈλΌμ°μ € λ“±)
- **Accept** : ν•΄λ‹Ή μ”μ²­μ΄ λ°›μ„ μ μλ” μ‘λ‹µμ body λ°μ΄ν„° νƒ€μ…
- **Coonection** : ν•΄λ‹Ή μ”μ²­μ΄ λλ‚ ν›„ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ κ³„μ† μ—°κ²°μ„ μ μ§€ν•  κ²ƒ(keep-alive)μΈμ§€ λμ„ κ²ƒ(close)μΈμ§€
- **Content-Tyope** : μ”μ²­μ— ν¬ν•¨λ bodyμ λ°μ΄ν„° νƒ€μ…
- **Content-Length** : μ”μ²­μ— ν¬ν•¨λ bodyμ μ΄ μ‚¬μ΄μ¦

μ°Έκ³  : [[HTTP κΈ°μ΄_1] ν—¤λ” (μ”μ²­(request) ν—¤λ”, μ‘λ‹µ(response) ν—¤λ”)](

##### Body

```
{
	"uid": "qwer1234",
	"status": "happy"
}
```

μ”μ²­μ΄ μ „μ†΅ν•λ” λ°μ΄ν„°λ¥Ό λ‹΄κ³  μλ” λ¶€λ¶„

λ§μ•½ μ „μ†΅ν•λ” λ°μ΄ν„°κ°€ μ—†λ‹¤λ©΄ body λ¶€λ¶„μ€ λΉ„μ–΄μμ



### HTTP μ‘λ‹µ κµ¬μ΅°

##### Status Line

```http
HTTP/1.1 404 Not Found
```

λ‹¤μκ³Ό κ°™μ΄ κµ¬μ„±

- HTTP version
  - μ‚¬μ©λκ³  μλ” HTTP λ²„μ „
- Status Code
  - μ‘λ‹µ μƒνƒλ¥Ό λ―Έλ¦¬ μ§€μ •λμ–΄ μλ” μ«μ μ½”λ“λ΅ ν‘μ‹
- Status Text
  - μ‘λ‹µ μƒνƒλ¥Ό κ°„λµν• ν…μ¤νΈλ΅ ν‘μ‹

##### Headers

```
Connection: close
Content-Length: 1573
Content-Type: text/html; charset=UTF-8
Date: Thu, 18 Jul 2019 20:53:12 GMT
```

HTTP μ”μ²­μ ν—¤λ” λ¶€λ¶„κ³Ό λ™μΌ, λ‹¤λ§ μ‘λ‹µμ—μ„λ§ μ‚¬μ©λλ” ν—¤λ” κ°’λ“¤μ΄ μ΅΄μ¬ 

##### Body

```
<!DOCTYPE html>
<html lang=en>
	<meta charset=uft-8>
	<title>Error 404 (Not Found)!!!</title>
	<style>
		...................
```

HTTP μ”μ²­μ body λ¶€λ¶„κ³Ό λ™μΌ



### μμ£Ό μ‚¬μ©λλ” HTTP λ©”μ†λ“

#### GET

λ°μ΄ν„°λ¥Ό μ„λ²„λ΅λ¶€ν„° μ”μ²­, λ°μ΄ν„°μ λ³€κ²½ μ‚¬ν•­ μ—†μ΄ λ‹¨μν λ°μ΄ν„° λ°›μ•„μ¤λ” μ”μ²­ (μ£Όλ΅ bodyκ°€ λΉ„μ–΄μλ‹¤)

#### POST

λ°μ΄ν„° μƒμ„±/μμ •/μ‚­μ  μ”μ²­

#### OPTIONS

μ£Όλ΅ νΉμ • μ—”λ“ν¬μΈνΈμ—μ„ ν—μ©ν•λ” λ©”μ†λ“λ“¤μ΄ λ¬΄μ—‡μ΄ μλ”μ§€ μ•κ³ μ ν•λ” μ”μ²­

μ‘λ‹µμ€ λ‹¤μκ³Ό κ°™λ‹¤

```http
HTTP/1.0 200 OK

ALLOW: GET, HEAD, OPTIONS
Content-Length: 0
....
```

#### PUT

μ°Έκ³  : [POST vs PUT](https://blog.embian.com/66)

#### DELETE

λ°μ΄ν„° μ‚­μ  μ”μ²­



### μμ£Ό μ‚¬μ©λλ” HTTP Status Codeμ™€ Text

#### 200 OK
μ”μ²­μ΄ μ„±κ³µμ μΌλ΅ μ²λ¦¬

#### 301 Moved Permanently
μ”μ²­μ„ λ³΄λ‚Έ μ—”λ“ν¬μΈνΈμ URL μ£Όμ†κ°€ λ°”λ€μ—μμ„ λ‚νƒ€λƒ„
λ³΄ν†µ Location ν—¤λ”μ— ν•΄λ‹Ή μ—”λ“ν¬μΈνΈμ μƒλ΅μ΄ μ£Όμ†κ°€ ν¬ν•¨

#### 404 Bad Request
μλ»λ μ”μ²­
μ£Όλ΅ μ”μ²­μ— ν¬ν•¨λ input κ°’μ΄ μλ» λ³΄λ‚΄μ΅μ„ λ• μ‚¬μ©

#### 401 Unauthorized
μ”μ²­μ„ λ³΄λ‚΄λ” μ£Όμ²΄μ μ‹ λ¶„ ν™•μΈμ΄ μ”κµ¬λ  λ• λ³΄λƒ„
μ£Όλ΅ λ΅κ·ΈμΈμ΄ ν•„μ”ν• κ²½μ°

#### 403 Forbidden
μ”μ²­μ„ λ³΄λ‚΄λ” μ£Όμ²΄κ°€ ν•΄λ‹Ή μ”μ²­μ— λ€ν• κ¶ν•μ΄ μ—†μμ„ μλ―Έ

#### 404 Not Found
μ”μ²­μ„ λ³΄λ‚΄κ³ μ ν•λ” URIκ°€ μ΅΄μ¬ν•μ§€ μ•μ

#### 500 Interneal Server Error
λ‚΄λ¶€ μ„λ²„ μ¤λ¥ λ°μƒ



### API μ—”λ“ ν¬μΈνΈ μ•„ν‚¤ν…μ² ν¨ν„΄

#### RESTful HTTP API

> REpresentational State Transfer

APIμ—μ„ μ „μ†΅ν•λ” λ¦¬μ†μ¤λ¥Ό URIλ΅ ν‘ν„ν•κ³ , ν•΄λ‹Ή λ¦¬μ†μ¤μ— ν–‰ν•κ³ μ ν•λ” μλ„λ¥Ό HTTP λ©”μ†λ“λ΅ μ •μν•λ” λ°©μ‹

Self-Descriptiveness : μ—”λ“ν¬μΈνΈμ κµ¬μ΅°λ§ λ³΄λ”λΌλ„ ν•΄λ‹Ή μ—”λ“ν¬μΈνΈκ°€ μ κ³µν•λ” λ¦¬μ†μ¤μ™€ κΈ°λ¥ νμ•… κ°€λ¥

#### GraphQL

> Graph Query Language

APIμ κµ¬μ΅°κ°€ νΉμ • ν΄λΌμ΄μ–ΈνΈμ— λ§μ¶”μ–΄μ Έμ„ λ‹¤λ¥Έ ν΄λΌμ΄μ–ΈνΈμ—μ„ μ‚¬μ©ν•κΈ°μ— μ ν•©ν•μ§€ μ•κ² λλ‹¤λ” REST λ°©μ‹μ„ ν•΄κ²°ν•κΈ° μ„ν•΄ λ„μ…λ¨

ν•λ‚μ μ—”λ“ν¬μΈνΈμ— ν΄λΌμ΄μ–ΈνΈκ°€ ν•„μ”ν• κ²ƒμ„ μ •μν•΄ μ”μ²­ν•λ” λ°©μ‹

μλ¥Ό λ“¤μ–΄, μΌλ°μ μΈ REST λ°©μ‹μ—μ„ μ•„μ΄λ””κ°€ 1μΈ μ‚¬μ©μμ μ •λ³΄μ™€ κ·Έμ μΉκµ¬λ“¤μ μ΄λ¦„ μ •λ³΄λ¥Ό λ°›μ•„μ¤κ³ μ ν• λ•,

```
GET /users/1
GET /users/1/friends
```

μ™€ κ°™μ΄ λ‘λ²μ HTTP μ”μ²­μ„ λ³΄λ‚΄κ±°λ‚

```
GET /users/1?include=friends.name
```

μ λ°©μ‹μΌλ΅ HTTP μ”μ²­μ„ λ³΄λ‚΄μ•Ό ν•λ‹¤.

κ·Έλ¬λ‚ GraphQL λ°©μ‹μ—μ„λ” ν•λ²μ μ”μ²­μΌλ΅ μ²λ¦¬ κ°€λ¥ν•λ‹¤.

```
POST /graphql
{
	user(id: 1){
		name
		age
		friends{
			name
		}
	}
}
```

μ°Έκ³ : [GraphQLκ³Ό RESTFul API](https://www.holaxprogramming.com/2018/01/20/graphql-vs-restful-api/)